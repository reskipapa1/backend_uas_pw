generator client {
  provider = "prisma-client-js"
  output   = "../generated/prisma"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model dosen {
  nip    String   @id @db.VarChar(18)
  nama   String   @db.VarChar(35)
  jadwal jadwal[]
}

model infokus_bagus {
  kode       String       @id @db.VarChar(10)
  merek      String       @db.VarChar(10)
  peminjaman peminjaman[]
}

model infokus_rusak {
  kode  String @id @db.VarChar(10)
  merek String @db.VarChar(10)
}

model jadwal {
  kodemk     String     @db.VarChar(9)
  nip        String     @db.VarChar(18)
  ruangan    String     @db.VarChar(18)
  waktu      String?    @db.VarChar(30)
  matakuliah matakuliah @relation(fields: [kodemk], references: [kode], onDelete: NoAction, onUpdate: NoAction, map: "jwl_kodemk_fk")
  dosen      dosen      @relation(fields: [nip], references: [nip], onDelete: NoAction, onUpdate: NoAction, map: "jwl_nip_fk")

  @@id([kodemk, nip])
  @@index([nip], map: "jwl_nip_fk")
}

model mahasiswa {
  nik        String       @id @db.VarChar(16)
  nama       String       @db.VarChar(35)
  peminjaman peminjaman[]
}

model matakuliah {
  kode       String       @id @db.VarChar(9)
  nama       String       @db.VarChar(45)
  sks        Int
  jadwal     jadwal[]
  peminjaman peminjaman[]
}

model peminjaman {
  nik           String        @db.VarChar(16)
  kodemk        String        @db.VarChar(9)
  kodein        String        @db.VarChar(10)
  infokus_bagus infokus_bagus @relation(fields: [kodein], references: [kode], onDelete: NoAction, onUpdate: NoAction, map: "pmn_kodein_fk")
  matakuliah    matakuliah    @relation(fields: [kodemk], references: [kode], onDelete: NoAction, onUpdate: NoAction, map: "pmn_kodemk_fk")
  mahasiswa     mahasiswa     @relation(fields: [nik], references: [nik], onDelete: NoAction, onUpdate: NoAction, map: "pmn_nik_fk")

  @@id([nik, kodemk, kodein])
  @@index([kodein], map: "pmn_kodein_fk")
  @@index([kodemk], map: "pmn_kodemk_fk")
}

model User {
  id       Int    @id @default(autoincrement())
  email    String @unique
  password String
  name     String
}

model ViewDetailPeminjaman {
  kode_infokus   String
  kode_matkul    String
  nama_mahasiswa String
  nama_dosen     String
  jadwal         String

  @@map("view_detail_peminjaman")
  @@ignore
}
